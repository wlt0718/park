import{r as oe,u as ae,P as le,c as se}from"./use-route-DzN3-54b.js";import{I as X}from"./index-ByH2j3XH.js";import{c as D,e as E,N as ce,n as x,b as I,C as ie,w as L,L as p,t as P,s as j,o as re,O as ue,j as G,g as de,v as V}from"./with-install-El4aLNkl.js";import{c,d as R,a as Z,r as y,A as q,B as ve,z as Y,g as fe,T as W,n as J,I as Q,C as ye,E as me,N as ge,O as he,H as Ie,F as Se,m as K}from"./index-Cq5aGpny.js";import{e as be,T as F,H as xe}from"./constant-C5t5NxWu.js";import{u as Ce}from"./use-expose-dVsqsfwW.js";let Oe=2e3;const Pe=()=>++Oe,[ke,T]=D("loading"),Te=Array(12).fill(null).map((e,t)=>c("i",{class:T("line",String(t+1))},null)),ze=c("svg",{class:T("circular"),viewBox:"25 25 50 50"},[c("circle",{cx:"50",cy:"50",r:"20",fill:"none"},null)]),we={size:x,type:I("circular"),color:String,vertical:Boolean,textSize:x,textColor:String};var Be=R({name:ke,props:we,setup(e,{slots:t}){const n=Z(()=>E({color:e.color},ce(e.size))),u=()=>{const o=e.type==="spinner"?Te:ze;return c("span",{class:T("spinner",e.type),style:n.value},[t.icon?t.icon():o])},a=()=>{var o;if(t.default)return c("span",{class:T("text"),style:{fontSize:ie(e.textSize),color:(o=e.textColor)!=null?o:e.color}},[t.default()])};return()=>{const{type:o,vertical:l}=e;return c("div",{class:T([o,{vertical:l}]),"aria-live":"polite","aria-busy":!0},[u(),a()])}}});const _e=L(Be),[Ae,O]=D("button"),De=E({},oe,{tag:I("button"),text:String,icon:String,type:I("default"),size:I("normal"),color:String,block:Boolean,plain:Boolean,round:Boolean,square:Boolean,loading:Boolean,hairline:Boolean,disabled:Boolean,iconPrefix:String,nativeType:I("button"),loadingSize:x,loadingText:String,loadingType:String,iconPosition:I("left")});var Ee=R({name:Ae,props:De,emits:["click"],setup(e,{emit:t,slots:n}){const u=ae(),a=()=>n.loading?n.loading():c(_e,{size:e.loadingSize,type:e.loadingType,class:O("loading")},null),o=()=>{if(e.loading)return a();if(n.icon)return c("div",{class:O("icon")},[n.icon()]);if(e.icon)return c(X,{name:e.icon,class:O("icon"),classPrefix:e.iconPrefix},null)},l=()=>{let s;if(e.loading?s=e.loadingText:s=n.default?n.default():e.text,s)return c("span",{class:O("text")},[s])},i=()=>{const{color:s,plain:d}=e;if(s){const v={color:d?s:"white"};return d||(v.background=s),s.includes("gradient")?v.border=0:v.borderColor=s,v}},b=s=>{e.loading?p(s):e.disabled||(t("click",s),u())};return()=>{const{tag:s,type:d,size:v,block:C,round:f,plain:m,square:h,loading:g,disabled:z,hairline:w,nativeType:N,iconPosition:B}=e,_=[O([d,v,{plain:m,block:C,round:f,square:h,loading:g,disabled:z,hairline:w}]),{[be]:w}];return c(s,{type:N,class:_,style:i(),disabled:z,onClick:b},{default:()=>[c("div",{class:O("content")},[B==="left"&&o(),l(),B==="right"&&o()])]})}}});const We=L(Ee),ee={show:Boolean,zIndex:x,overlay:P,duration:x,teleport:[String,Object],lockScroll:P,lazyRender:P,beforeClose:Function,overlayStyle:Object,overlayClass:j,transitionAppear:Boolean,closeOnClickOverlay:P},Je=Object.keys(ee);function Le(e,t){return e>t?"horizontal":t>e?"vertical":""}function Re(){const e=y(0),t=y(0),n=y(0),u=y(0),a=y(0),o=y(0),l=y(""),i=y(!0),b=()=>l.value==="vertical",s=()=>l.value==="horizontal",d=()=>{n.value=0,u.value=0,a.value=0,o.value=0,l.value="",i.value=!0};return{move:f=>{const m=f.touches[0];n.value=(m.clientX<0?0:m.clientX)-e.value,u.value=m.clientY-t.value,a.value=Math.abs(n.value),o.value=Math.abs(u.value);const h=10;(!l.value||a.value<h&&o.value<h)&&(l.value=Le(a.value,o.value)),i.value&&(a.value>F||o.value>F)&&(i.value=!1)},start:f=>{d(),e.value=f.touches[0].clientX,t.value=f.touches[0].clientY},reset:d,startX:e,startY:t,deltaX:n,deltaY:u,offsetX:a,offsetY:o,direction:l,isVertical:b,isHorizontal:s,isTap:i}}let k=0;const H="van-overflow-hidden";function Ne(e,t){const n=Re(),u="01",a="10",o=d=>{n.move(d);const v=n.deltaY.value>0?a:u,C=ue(d.target,e.value),{scrollHeight:f,offsetHeight:m,scrollTop:h}=C;let g="11";h===0?g=m>=f?"00":"01":h+m>=f&&(g="10"),g!=="11"&&n.isVertical()&&!(parseInt(g,2)&parseInt(v,2))&&p(d,!0)},l=()=>{document.addEventListener("touchstart",n.start),document.addEventListener("touchmove",o,{passive:!1}),k||document.body.classList.add(H),k++},i=()=>{k&&(document.removeEventListener("touchstart",n.start),document.removeEventListener("touchmove",o),k--,k||document.body.classList.remove(H))},b=()=>t()&&l(),s=()=>t()&&i();re(b),q(s),ve(s),Y(t,d=>{d?l():i()})}function te(e){const t=y(!1);return Y(e,n=>{n&&(t.value=n)},{immediate:!0}),n=>()=>t.value?n():null}const M=()=>{var e;const{scopeId:t}=((e=fe())==null?void 0:e.vnode)||{};return t?{[t]:""}:null},[$e,pe]=D("overlay"),Ye={show:Boolean,zIndex:x,duration:x,className:j,lockScroll:P,lazyRender:P,customStyle:Object};var Ke=R({name:$e,props:Ye,setup(e,{slots:t}){const n=y(),u=te(()=>e.show||!e.lazyRender),a=l=>{e.lockScroll&&p(l,!0)},o=u(()=>{var l;const i=E(de(e.zIndex),e.customStyle);return V(e.duration)&&(i.animationDuration=`${e.duration}s`),J(c("div",{ref:n,style:i,class:[pe(),e.className]},[(l=t.default)==null?void 0:l.call(t)]),[[Q,e.show]])});return G("touchmove",a,{target:n}),()=>c(W,{name:"van-fade",appear:!0},{default:o})}});const Fe=L(Ke),He=E({},ee,{round:Boolean,position:I("center"),closeIcon:I("cross"),closeable:Boolean,transition:String,iconPrefix:String,closeOnPopstate:Boolean,closeIconPosition:I("top-right"),safeAreaInsetTop:Boolean,safeAreaInsetBottom:Boolean}),[Me,U]=D("popup");var Ue=R({name:Me,inheritAttrs:!1,props:He,emits:["open","close","opened","closed","keydown","update:show","clickOverlay","clickCloseIcon"],setup(e,{emit:t,attrs:n,slots:u}){let a,o;const l=y(),i=y(),b=te(()=>e.show||!e.lazyRender),s=Z(()=>{const r={zIndex:l.value};if(V(e.duration)){const S=e.position==="center"?"animationDuration":"transitionDuration";r[S]=`${e.duration}s`}return r}),d=()=>{a||(a=!0,l.value=e.zIndex!==void 0?+e.zIndex:Pe(),t("open"))},v=()=>{a&&se(e.beforeClose,{done(){a=!1,t("close"),t("update:show",!1)}})},C=r=>{t("clickOverlay",r),e.closeOnClickOverlay&&v()},f=()=>{if(e.overlay)return c(Fe,K({show:e.show,class:e.overlayClass,zIndex:l.value,duration:e.duration,customStyle:e.overlayStyle,role:e.closeOnClickOverlay?"button":void 0,tabindex:e.closeOnClickOverlay?0:void 0},M(),{onClick:C}),{default:u["overlay-content"]})},m=r=>{t("clickCloseIcon",r),v()},h=()=>{if(e.closeable)return c(X,{role:"button",tabindex:0,name:e.closeIcon,class:[U("close-icon",e.closeIconPosition),xe],classPrefix:e.iconPrefix,onClick:m},null)};let g;const z=()=>{g&&clearTimeout(g),g=setTimeout(()=>{t("opened")})},w=()=>t("closed"),N=r=>t("keydown",r),B=b(()=>{var r;const{round:S,position:A,safeAreaInsetTop:$,safeAreaInsetBottom:ne}=e;return J(c("div",K({ref:i,style:s.value,role:"dialog",tabindex:0,class:[U({round:S,[A]:A}),{"van-safe-area-top":$,"van-safe-area-bottom":ne}],onKeydown:N},n,M()),[(r=u.default)==null?void 0:r.call(u),h()]),[[Q,e.show]])}),_=()=>{const{position:r,transition:S,transitionAppear:A}=e,$=r==="center"?"van-fade":`van-popup-slide-${r}`;return c(W,{name:S||$,appear:A,onAfterEnter:z,onAfterLeave:w},{default:B})};return Y(()=>e.show,r=>{r&&!a&&(d(),n.tabindex===0&&ye(()=>{var S;(S=i.value)==null||S.focus()})),!r&&a&&(a=!1,t("close"))}),Ce({popupRef:i}),Ne(i,()=>e.show&&e.lockScroll),G("popstate",()=>{e.closeOnPopstate&&(v(),o=!1)}),me(()=>{e.show&&d()}),ge(()=>{o&&(t("update:show",!0),o=!1)}),q(()=>{e.show&&e.teleport&&(v(),o=!0)}),he(le,()=>e.show),()=>e.teleport?c(Ie,{to:e.teleport},{default:()=>[f(),_()]}):c(Se,null,[f(),_()])}});const Qe=L(Ue);export{We as B,_e as L,Qe as P,Je as a,ee as p,Re as u};
