import{d as A,r as y,c as a,g as ne,a as K,J as oe,K as be,A as p,T as ae,n as le,G as se,I as Ce,C as we,L as Se,M as xe,E as Ie,F as ke,m as H,N as Oe,l as ce,O as Pe}from"./index-PxswfuWn.js";import{c as D,u as Te,t as T,w as R,e as I,L as _e,n as z,b as O,q as ie,I as re,H as X,a as ze,d as j,x as Ae,M as De,D as ue,g as Ee,f as de,p as Re,N as V,O as Le,j as $e}from"./index-CIAfUPUf.js";import{u as Ne,r as fe,a as ve,e as Fe,T as W,P as Ke,c as me,H as He,f as Me,g as Ue}from"./use-route-BMdZwbVx.js";const[ge,Z]=D("action-bar"),ye=Symbol(ge),Ye={placeholder:Boolean,safeAreaInsetBottom:T};var pe=A({name:ge,props:Ye,setup(e,{slots:t}){const n=y(),s=Ne(n,Z),{linkChildren:o}=Te(ye);o();const l=()=>{var c;return a("div",{ref:n,class:[Z(),{"van-safe-area-bottom":e.safeAreaInsetBottom}]},[(c=t.default)==null?void 0:c.call(t)])};return()=>e.placeholder?s(l):l()}});const Xe=R(pe);function G(e){const t=ne();t&&I(t.proxy,e)}let je=2e3;const Ge=()=>++je,[qe,$]=D("loading"),Ve=Array(12).fill(null).map((e,t)=>a("i",{class:$("line",String(t+1))},null)),We=a("svg",{class:$("circular"),viewBox:"25 25 50 50"},[a("circle",{cx:"50",cy:"50",r:"20",fill:"none"},null)]),Ze={size:z,type:O("circular"),color:String,vertical:Boolean,textSize:z,textColor:String};var Je=A({name:qe,props:Ze,setup(e,{slots:t}){const n=K(()=>I({color:e.color},_e(e.size))),s=()=>{const l=e.type==="spinner"?Ve:We;return a("span",{class:$("spinner",e.type),style:n.value},[t.icon?t.icon():l])},o=()=>{var l;if(t.default)return a("span",{class:$("text"),style:{fontSize:ie(e.textSize),color:(l=e.textColor)!=null?l:e.color}},[t.default()])};return()=>{const{type:l,vertical:c}=e;return a("div",{class:$([l,{vertical:c}]),"aria-live":"polite","aria-busy":!0},[s(),o()])}}});const Qe=R(Je),[et,E]=D("button"),tt=I({},fe,{tag:O("button"),text:String,icon:String,type:O("default"),size:O("normal"),color:String,block:Boolean,plain:Boolean,round:Boolean,square:Boolean,loading:Boolean,hairline:Boolean,disabled:Boolean,iconPrefix:String,nativeType:O("button"),loadingSize:z,loadingText:String,loadingType:String,iconPosition:O("left")});var nt=A({name:et,props:tt,emits:["click"],setup(e,{emit:t,slots:n}){const s=ve(),o=()=>n.loading?n.loading():a(Qe,{size:e.loadingSize,type:e.loadingType,class:E("loading")},null),l=()=>{if(e.loading)return o();if(n.icon)return a("div",{class:E("icon")},[n.icon()]);if(e.icon)return a(re,{name:e.icon,class:E("icon"),classPrefix:e.iconPrefix},null)},c=()=>{let u;if(e.loading?u=e.loadingText:u=n.default?n.default():e.text,u)return a("span",{class:E("text")},[u])},i=()=>{const{color:u,plain:f}=e;if(u){const v={color:f?u:"white"};return f||(v.background=u),u.includes("gradient")?v.border=0:v.borderColor=u,v}},h=u=>{e.loading?X(u):e.disabled||(t("click",u),s())};return()=>{const{tag:u,type:f,size:v,block:k,round:g,plain:b,square:S,loading:C,disabled:r,hairline:m,nativeType:w,iconPosition:B}=e,P=[E([f,v,{plain:b,block:k,round:g,square:S,loading:C,disabled:r,hairline:m}]),{[Fe]:m}];return a(u,{type:w,class:P,style:i(),disabled:r,onClick:h},{default:()=>[a("div",{class:E("content")},[B==="left"&&l(),c(),B==="right"&&l()])]})}}});const U=R(nt),[ot,at]=D("action-bar-button"),lt=I({},fe,{type:String,text:String,icon:String,color:String,loading:Boolean,disabled:Boolean});var st=A({name:ot,props:lt,setup(e,{slots:t}){const n=ve(),{parent:s,index:o}=ze(ye),l=K(()=>{if(s){const i=s.children[o.value-1];return!(i&&"isButton"in i)}}),c=K(()=>{if(s){const i=s.children[o.value+1];return!(i&&"isButton"in i)}});return G({isButton:!0}),()=>{const{type:i,icon:h,text:u,color:f,loading:v,disabled:k}=e;return a(U,{class:at([i,{last:c.value,first:l.value}]),size:"large",type:i,icon:h,color:f,loading:v,disabled:k,onClick:n},{default:()=>[t.default?t.default():u]})}}});const J=R(st),q={show:Boolean,zIndex:z,overlay:T,duration:z,teleport:[String,Object],lockScroll:T,lazyRender:T,beforeClose:Function,overlayStyle:Object,overlayClass:j,transitionAppear:Boolean,closeOnClickOverlay:T},ct=Object.keys(q);function it(e,t){return e>t?"horizontal":t>e?"vertical":""}function rt(){const e=y(0),t=y(0),n=y(0),s=y(0),o=y(0),l=y(0),c=y(""),i=y(!0),h=()=>c.value==="vertical",u=()=>c.value==="horizontal",f=()=>{n.value=0,s.value=0,o.value=0,l.value=0,c.value="",i.value=!0};return{move:g=>{const b=g.touches[0];n.value=(b.clientX<0?0:b.clientX)-e.value,s.value=b.clientY-t.value,o.value=Math.abs(n.value),l.value=Math.abs(s.value);const S=10;(!c.value||o.value<S&&l.value<S)&&(c.value=it(o.value,l.value)),i.value&&(o.value>W||l.value>W)&&(i.value=!1)},start:g=>{f(),e.value=g.touches[0].clientX,t.value=g.touches[0].clientY},reset:f,startX:e,startY:t,deltaX:n,deltaY:s,offsetX:o,offsetY:l,direction:c,isVertical:h,isHorizontal:u,isTap:i}}let L=0;const Q="van-overflow-hidden";function ut(e,t){const n=rt(),s="01",o="10",l=f=>{n.move(f);const v=n.deltaY.value>0?o:s,k=De(f.target,e.value),{scrollHeight:g,offsetHeight:b,scrollTop:S}=k;let C="11";S===0?C=b>=g?"00":"01":S+b>=g&&(C="10"),C!=="11"&&n.isVertical()&&!(parseInt(C,2)&parseInt(v,2))&&X(f,!0)},c=()=>{document.addEventListener("touchstart",n.start),document.addEventListener("touchmove",l,{passive:!1}),L||document.body.classList.add(Q),L++},i=()=>{L&&(document.removeEventListener("touchstart",n.start),document.removeEventListener("touchmove",l),L--,L||document.body.classList.remove(Q))},h=()=>t()&&c(),u=()=>t()&&i();Ae(h),oe(u),be(u),p(t,f=>{f?c():i()})}function he(e){const t=y(!1);return p(e,n=>{n&&(t.value=n)},{immediate:!0}),n=>()=>t.value?n():null}const ee=()=>{var e;const{scopeId:t}=((e=ne())==null?void 0:e.vnode)||{};return t?{[t]:""}:null},[dt,ft]=D("overlay"),vt={show:Boolean,zIndex:z,duration:z,className:j,lockScroll:T,lazyRender:T,customStyle:Object};var mt=A({name:dt,props:vt,setup(e,{slots:t}){const n=y(),s=he(()=>e.show||!e.lazyRender),o=c=>{e.lockScroll&&X(c,!0)},l=s(()=>{var c;const i=I(Ee(e.zIndex),e.customStyle);return de(e.duration)&&(i.animationDuration=`${e.duration}s`),le(a("div",{ref:n,style:i,class:[ft(),e.className]},[(c=t.default)==null?void 0:c.call(t)]),[[se,e.show]])});return ue("touchmove",o,{target:n}),()=>a(ae,{name:"van-fade",appear:!0},{default:l})}});const gt=R(mt),yt=I({},q,{round:Boolean,position:O("center"),closeIcon:O("cross"),closeable:Boolean,transition:String,iconPrefix:String,closeOnPopstate:Boolean,closeIconPosition:O("top-right"),safeAreaInsetTop:Boolean,safeAreaInsetBottom:Boolean}),[ht,te]=D("popup");var Bt=A({name:ht,inheritAttrs:!1,props:yt,emits:["open","close","opened","closed","keydown","update:show","clickOverlay","clickCloseIcon"],setup(e,{emit:t,attrs:n,slots:s}){let o,l;const c=y(),i=y(),h=he(()=>e.show||!e.lazyRender),u=K(()=>{const d={zIndex:c.value};if(de(e.duration)){const _=e.position==="center"?"animationDuration":"transitionDuration";d[_]=`${e.duration}s`}return d}),f=()=>{o||(o=!0,c.value=e.zIndex!==void 0?+e.zIndex:Ge(),t("open"))},v=()=>{o&&me(e.beforeClose,{done(){o=!1,t("close"),t("update:show",!1)}})},k=d=>{t("clickOverlay",d),e.closeOnClickOverlay&&v()},g=()=>{if(e.overlay)return a(gt,H({show:e.show,class:e.overlayClass,zIndex:c.value,duration:e.duration,customStyle:e.overlayStyle,role:e.closeOnClickOverlay?"button":void 0,tabindex:e.closeOnClickOverlay?0:void 0},ee(),{onClick:k}),{default:s["overlay-content"]})},b=d=>{t("clickCloseIcon",d),v()},S=()=>{if(e.closeable)return a(re,{role:"button",tabindex:0,name:e.closeIcon,class:[te("close-icon",e.closeIconPosition),He],classPrefix:e.iconPrefix,onClick:b},null)};let C;const r=()=>{C&&clearTimeout(C),C=setTimeout(()=>{t("opened")})},m=()=>t("closed"),w=d=>t("keydown",d),B=h(()=>{var d;const{round:_,position:N,safeAreaInsetTop:M,safeAreaInsetBottom:Be}=e;return le(a("div",H({ref:i,style:u.value,role:"dialog",tabindex:0,class:[te({round:_,[N]:N}),{"van-safe-area-top":M,"van-safe-area-bottom":Be}],onKeydown:w},n,ee()),[(d=s.default)==null?void 0:d.call(s),S()]),[[se,e.show]])}),P=()=>{const{position:d,transition:_,transitionAppear:N}=e,M=d==="center"?"van-fade":`van-popup-slide-${d}`;return a(ae,{name:_||M,appear:N,onAfterEnter:r,onAfterLeave:m},{default:B})};return p(()=>e.show,d=>{d&&!o&&(f(),n.tabindex===0&&Ce(()=>{var _;(_=i.value)==null||_.focus()})),!d&&o&&(o=!1,t("close"))}),G({popupRef:i}),ut(i,()=>e.show&&e.lockScroll),ue("popstate",()=>{e.closeOnPopstate&&(v(),l=!1)}),we(()=>{e.show&&f()}),Se(()=>{l&&(t("update:show",!0),l=!1)}),oe(()=>{e.show&&e.teleport&&(v(),l=!0)}),xe(Ke,()=>e.show),()=>e.teleport?a(Ie,{to:e.teleport},{default:()=>[g(),P()]}):a(ke,null,[g(),P()])}});const bt=R(Bt);function Ct(){const e=ce({show:!1}),t=o=>{e.show=o},n=o=>{I(e,o,{transitionAppear:!0}),t(!0)},s=()=>t(!1);return G({open:n,close:s,toggle:t}),{open:n,close:s,state:e,toggle:t}}function wt(e){const t=Oe(e),n=document.createElement("div");return document.body.appendChild(n),{instance:t.mount(n),unmount(){t.unmount(),document.body.removeChild(n)}}}const[St,x,F]=D("dialog"),xt=I({},q,{title:String,theme:String,width:z,message:[String,Function],callback:Function,allowHtml:Boolean,className:j,transition:O("van-dialog-bounce"),messageAlign:String,closeOnPopstate:T,showCancelButton:Boolean,cancelButtonText:String,cancelButtonColor:String,cancelButtonDisabled:Boolean,confirmButtonText:String,confirmButtonColor:String,confirmButtonDisabled:Boolean,showConfirmButton:T,closeOnClickOverlay:Boolean}),It=[...ct,"transition","closeOnPopstate"];var kt=A({name:St,props:xt,emits:["confirm","cancel","keydown","update:show"],setup(e,{emit:t,slots:n}){const s=y(),o=ce({confirm:!1,cancel:!1}),l=r=>t("update:show",r),c=r=>{var m;l(!1),(m=e.callback)==null||m.call(e,r)},i=r=>()=>{e.show&&(t(r),e.beforeClose?(o[r]=!0,me(e.beforeClose,{args:[r],done(){c(r),o[r]=!1},canceled(){o[r]=!1}})):c(r))},h=i("cancel"),u=i("confirm"),f=Pe(r=>{var m,w;if(r.target!==((w=(m=s.value)==null?void 0:m.popupRef)==null?void 0:w.value))return;({Enter:e.showConfirmButton?u:V,Escape:e.showCancelButton?h:V})[r.key](),t("keydown",r)},["enter","esc"]),v=()=>{const r=n.title?n.title():e.title;if(r)return a("div",{class:x("header",{isolated:!e.message&&!n.default})},[r])},k=r=>{const{message:m,allowHtml:w,messageAlign:B}=e,P=x("message",{"has-title":r,[B]:B}),d=Le(m)?m():m;return w&&typeof d=="string"?a("div",{class:P,innerHTML:d},null):a("div",{class:P},[d])},g=()=>{if(n.default)return a("div",{class:x("content")},[n.default()]);const{title:r,message:m,allowHtml:w}=e;if(m){const B=!!(r||n.title);return a("div",{key:w?1:0,class:x("content",{isolated:!B})},[k(B)])}},b=()=>a("div",{class:[Ue,x("footer")]},[e.showCancelButton&&a(U,{size:"large",text:e.cancelButtonText||F("cancel"),class:x("cancel"),style:{color:e.cancelButtonColor},loading:o.cancel,disabled:e.cancelButtonDisabled,onClick:h},null),e.showConfirmButton&&a(U,{size:"large",text:e.confirmButtonText||F("confirm"),class:[x("confirm"),{[Me]:e.showCancelButton}],style:{color:e.confirmButtonColor},loading:o.confirm,disabled:e.confirmButtonDisabled,onClick:u},null)]),S=()=>a(Xe,{class:x("footer")},{default:()=>[e.showCancelButton&&a(J,{type:"warning",text:e.cancelButtonText||F("cancel"),class:x("cancel"),color:e.cancelButtonColor,loading:o.cancel,disabled:e.cancelButtonDisabled,onClick:h},null),e.showConfirmButton&&a(J,{type:"danger",text:e.confirmButtonText||F("confirm"),class:x("confirm"),color:e.confirmButtonColor,loading:o.confirm,disabled:e.confirmButtonDisabled,onClick:u},null)]}),C=()=>n.footer?n.footer():e.theme==="round-button"?S():b();return()=>{const{width:r,title:m,theme:w,message:B,className:P}=e;return a(bt,H({ref:s,role:"dialog",class:[x([w]),P],style:{width:ie(r)},tabindex:0,"aria-labelledby":m||B,onKeydown:f,"onUpdate:show":l},Re(e,It)),{default:()=>[v(),g(),C()]})}}});let Y;const Ot={title:"",width:"",theme:null,message:"",overlay:!0,callback:null,teleport:"body",className:"",allowHtml:!1,lockScroll:!0,transition:void 0,beforeClose:null,overlayClass:"",overlayStyle:void 0,messageAlign:"",cancelButtonText:"",cancelButtonColor:null,cancelButtonDisabled:!1,confirmButtonText:"",confirmButtonColor:null,confirmButtonDisabled:!1,showConfirmButton:!0,showCancelButton:!1,closeOnPopstate:!0,closeOnClickOverlay:!1};let Pt=I({},Ot);function Tt(){({instance:Y}=wt({setup(){const{state:t,toggle:n}=Ct();return()=>a(kt,H(t,{"onUpdate:show":n}),null)}}))}function _t(e){return $e?new Promise((t,n)=>{Y||Tt(),Y.open(I({},Pt,e,{callback:s=>{(s==="confirm"?t:n)(s)}}))}):Promise.resolve(void 0)}const Et=e=>_t(I({showCancelButton:!0},e));export{U as B,Qe as L,bt as P,Et as a,kt as b,G as c,rt as d,wt as m,_t as s,Ct as u};
