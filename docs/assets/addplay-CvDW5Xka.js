import{_ as E,l as I,r as v,a as u,u as L,b as c,h as o,n as r,v as l,c as h,w as D,F as j,o as d,x as P,q as U,t as V,p as R,j as G}from"./index-DbE_C6wj.js";import{s as B,a as H,P as J}from"./function-call-CFuz8RYW.js";import{I as K}from"./index-06rKFAdL.js";import"./use-route-BzJgsfbb.js";const s=m=>(R("data-v-aa3906de"),m=m(),G(),m),O={class:"from"},Q=s(()=>o("label",{for:"name",class:"from-label"},"商家",-1)),W=s(()=>o("label",{for:"team",class:"from-label"},"项目",-1)),X={class:"from-item"},Y=s(()=>o("label",{for:"count",class:"from-label"},"游玩人数",-1)),Z={class:"from-item"},oo=s(()=>o("label",{for:"amounts",class:"from-label"},"项目费用",-1)),to={class:"from-item"},eo=s(()=>o("label",{for:"proportion",class:"from-label"},"佣金比例",-1)),no={class:"from-item"},ao=s(()=>o("label",{for:"income",class:"from-label"},"应得收入",-1)),so={class:"popup-head"},ro=s(()=>o("span",null,"请选择商家",-1)),lo={class:"popup-box"},io=["onClick"],po={class:"popup-head"},uo=s(()=>o("span",null,"请选择项目",-1)),co={class:"popup-box"},mo=["onClick"],fo={__name:"addplay",setup(m){const _=I([{id:0,merchantName:"上海欢乐谷",project:[{id:"100001",name:"上海欢乐谷游艇",amounts:60,proportion:5},{id:"100002",name:"上海欢乐谷摩天轮",amounts:60,proportion:10},{id:"100003",name:"上海欢乐谷恐龙乐园",amounts:40,proportion:5},{id:"100004",name:"上海欢乐谷天地双雄",amounts:40,proportion:5}]},{merchantName:"上海市方特世界",id:5,project:[{id:"200001",name:"上海市方特世界游艇",amounts:60,proportion:5},{id:"200002",name:"上海市方特世界摩天轮",amounts:60,proportion:10},{id:"200003",name:"上海市方特世界恐龙乐园",amounts:40,proportion:5.5},{id:"200004",name:"上海市方特世界天地双雄",amounts:40,proportion:5}]},{merchantName:"上海市环球港",id:6,project:[{id:"300001",name:"上海市环球港游艇",amounts:60,proportion:5},{id:"300002",name:"上海市环球港摩天轮",amounts:60,proportion:10},{id:"300003",name:"上海市环球港恐龙乐园",amounts:40,proportion:5},{id:"300004",name:"上海市环球港天地双雄",amounts:40,proportion:5}]}]),n=I({name:"",project:"",count:void 0,amounts:void 0,proportion:void 0}),i=v(!1),f=v(void 0);function M(a){f.value=a.id}function $(){const a=_.find(t=>t.id===f.value);a&&(i.value=!1,n.name=a.merchantName,n.project="",n.amounts=void 0,n.proportion=void 0)}const p=v(!1),b=v(-1),k=u(()=>_.find(t=>t.id===f.value));function S(){if(!k.value)return B({title:"提示",message:"请先选择商家"}),!1;p.value=!0}function F(a){b.value=a.id}function T(){const a=k.value.project.find(t=>t.id===b.value);a&&(p.value=!1,n.project=a.name,n.amounts=a.amounts,n.proportion=a.proportion)}const C=u(()=>n.amounts?n.amounts+"元 / 人":""),w=u(()=>n.proportion?n.proportion+"%":""),x=u(()=>n.count&&n.amounts&&n.proportion?(Number(n.amounts)*Number(n.proportion)/100*Number(n.count)).toFixed(2):""),y=u(()=>x.value?x.value+"元":""),q=L();function z(){for(let a in n)if(!n[a]){B({title:"提示",message:"请先完成页面上的内容！"});return}H({title:"提示",message:"提交成功，请等待商家审核。",confirmButtonText:"返回首页",cancelButtonText:"留在当前页面"}).then(()=>{q.replace({name:"home"})}).catch(()=>{})}return(a,t)=>{const N=K,g=J;return d(),c(j,null,[o("div",O,[o("div",{class:"from-item",onClick:t[1]||(t[1]=e=>i.value=!0)},[Q,r(o("input",{id:"name",class:"from-input",type:"text",placeholder:"请选择商家",readonly:"","onUpdate:modelValue":t[0]||(t[0]=e=>n.name=e)},null,512),[[l,n.name]]),h(N,{name:"arrow",class:"right-icon"})]),o("div",{class:"from-item",onClick:S},[W,r(o("input",{id:"team",class:"from-input",type:"text",placeholder:"请选择项目",readonly:"","onUpdate:modelValue":t[2]||(t[2]=e=>n.project=e)},null,512),[[l,n.project]]),h(N,{name:"arrow",class:"right-icon"})]),o("div",X,[Y,r(o("input",{id:"count",class:"from-input",type:"tel",max:"5",placeholder:"请输入游玩人数","onUpdate:modelValue":t[3]||(t[3]=e=>n.count=e)},null,512),[[l,n.count]])]),o("div",Z,[oo,r(o("input",{id:"amounts",class:"from-input",type:"text",disabled:"",placeholder:"根据项目自动生成","onUpdate:modelValue":t[4]||(t[4]=e=>C.value=e)},null,512),[[l,C.value]])]),o("div",to,[eo,r(o("input",{id:"proportion",class:"from-input",type:"text",disabled:"",placeholder:"根据项目自动生成","onUpdate:modelValue":t[5]||(t[5]=e=>w.value=e)},null,512),[[l,w.value]])]),o("div",no,[ao,r(o("input",{id:"income",class:"from-input",type:"text",disabled:"",placeholder:"根据项目和人数自动生成","onUpdate:modelValue":t[6]||(t[6]=e=>y.value=e)},null,512),[[l,y.value]])])]),o("div",{class:"footer"},[o("button",{type:"button",class:"btn",onClick:z},"提交游玩申请")]),h(g,{show:i.value,"onUpdate:show":t[8]||(t[8]=e=>i.value=e),position:"bottom",round:"",class:"popup"},{default:D(()=>[o("div",so,[o("span",{class:"func cancel",onClick:t[7]||(t[7]=e=>i.value=!1)},"取消"),ro,o("span",{class:"func confirm",onClick:$},"确认")]),o("div",lo,[(d(!0),c(j,null,P(_,e=>(d(),c("div",{key:e.id,class:U(["item",[e.id===f.value?"active":""]]),onClick:A=>M(e)},V(e.merchantName),11,io))),128))])]),_:1},8,["show"]),h(g,{show:p.value,"onUpdate:show":t[10]||(t[10]=e=>p.value=e),position:"bottom",round:"",class:"popup"},{default:D(()=>[o("div",po,[o("span",{class:"func cancel",onClick:t[9]||(t[9]=e=>p.value=!1)},"取消"),uo,o("span",{class:"func confirm",onClick:T},"确认")]),o("div",co,[(d(!0),c(j,null,P(k.value.project,e=>(d(),c("div",{key:e.id,class:U(["item",[e.id===b.value?"active":""]]),onClick:A=>F(e)},V(e.name),11,mo))),128))])]),_:1},8,["show"])],64)}}},ko=E(fo,[["__scopeId","data-v-aa3906de"]]);export{ko as default};
